[build]
functions = "functions"
publish = "."

# Headers para cache de arquivos est√°ticos
[[headers]]
for = "/*.html"
[headers.values]
Cache-Control = "no-cache"

[[redirects]]
from = "/api/auth/*"
to = "/.netlify/functions/auth/:splat"
status = 200
force = true

[[redirects]]
from = "/api/anny"
to = "/.netlify/functions/anny-ai"
status = 200
force = true

[[redirects]]
from = "/api/webhook/events"
to = "/.netlify/functions/webhook-handler"
status = 200
force = true

[[redirects]]
from = "/api/facilzap-proxy"
to = "/.netlify/functions/facilzap-proxy"
status = 200
force = true

[[redirects]]
from = "/api/supabase-sync"
to = "/.netlify/functions/supabase-sync"
status = 200
force = true

[[redirects]]
from = "/facilzap-images/*"
to = "/.netlify/functions/image-proxy?url=:splat"
status = 200
force = true

[functions]
node_bundler = "esbuild"

[functions."facilzap-proxy"]
timeout = 60

[functions."supabase-sync"]
timeout = 30

[functions."image-proxy"]
timeout = 10
